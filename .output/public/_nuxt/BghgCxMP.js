import{j as F,aE as r,b3 as O,aF as _,b4 as k,R as q,f as C}from"./ZNDynpV9.js";function R(o,a,c){const[e={},u]=typeof a=="string"?[{},a]:[a,c],t=F(()=>r(o)),n=e.key||O([u,typeof t.value=="string"?t.value:"",...T(e)]);if(!n||typeof n!="string")throw new TypeError("[nuxt] [useFetch] key must be a string: "+n);if(!o)throw new Error("[nuxt] [useFetch] request is missing.");const i=n===u?"$f"+n:n;if(!e.baseURL&&typeof t.value=="string"&&t.value[0]==="/"&&t.value[1]==="/")throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:d,lazy:y,default:b,transform:w,pick:g,watch:h,immediate:v,getCachedData:E,deep:D,dedupe:$,...x}=e,p=_({...k,...x,cache:typeof e.cache=="boolean"?void 0:e.cache}),A={server:d,lazy:y,default:b,transform:w,pick:g,immediate:v,getCachedData:E,deep:D,dedupe:$,watch:h===!1?[]:[p,t,...h||[]]};let s;return q(i,()=>{var m;(m=s==null?void 0:s.abort)==null||m.call(s,new DOMException("Request aborted as another request to the same endpoint was initiated.","AbortError")),s=typeof AbortController<"u"?new AbortController:{};const l=r(e.timeout);let f;return l&&(f=setTimeout(()=>s.abort(new DOMException("Request aborted due to timeout.","AbortError")),l),s.signal.onabort=()=>clearTimeout(f)),(e.$fetch||globalThis.$fetch)(t.value,{signal:s.signal,...p}).finally(()=>{clearTimeout(f)})},A)}function T(o){var c;const a=[((c=r(o.method))==null?void 0:c.toUpperCase())||"GET",r(o.baseURL)];for(const e of[o.params||o.query]){const u=r(e);if(!u)continue;const t={};for(const[n,i]of Object.entries(u))t[r(n)]=r(i);a.push(t)}return a}const M=(o,a={})=>R(o,{...a,$fetch:C().$api},"$sC22i8rhLA");export{M as u};
