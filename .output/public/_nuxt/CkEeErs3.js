import{_ as ke}from"./B0Ww4se5.js";import{_ as Ue}from"./BJ7mrQqS.js";import{_ as Ie}from"./S27SpC1F.js";import{_ as D}from"./DhdCCdzQ.js";import{h as H,i as G,o as c,c as v,a as t,b as i,G as z,n as e,H as P,p as x,v as y,t as d,z as Be,$ as Ve,j as w,F as ze,E as Ne,a0 as Le,w as f,d as U,_ as R,k as Me,r as qe,f as Ae,m as je,K as Ce,S as Te}from"./CRKMsqI1.js";import{_ as Oe}from"./BKCTQd3a.js";import{_ as Pe}from"./BGvvHLJt.js";import{_ as De}from"./kiudz2oJ.js";import{_ as Se}from"./FIo-Aeg1.js";import{D as we}from"./BckML-4P.js";import{_ as He}from"./lmvGdM2p.js";import{_ as Ge}from"./SSGQ2eoQ.js";import{u as We}from"./QkMyHs9f.js";import{u as Qe}from"./X3xr6j6r.js";import"./CLTMpQKm.js";import"./DPc4cBMH.js";import"./DadTkFI4.js";import"./HNthaV9g.js";import"./CZgaGouz.js";import"./BOinvJEq.js";const Ye={class:"flex gap-1 items-center border border-border/30 rounded-2xl px-0"},Ke={class:"space-y-1 w-full"},Je={key:1,class:"flex items-end gap-2 text-base"},Xe={class:"flex items-center text-muted-foreground"},Ze={class:"flex items-center gap-1 text-primary-foreground"},et={class:"text-primary-foreground font-medium"},tt={class:"text-muted-foreground text-sm"},st={key:0,class:"text-primary text-sm"},ot={key:1,class:"text-muted-foreground text-sm"},nt=H({__name:"request-item",props:{type:{default:"song"},request:{},detailed:{type:Boolean,default:!0}},setup(k){const{authEmail:p}=G(),n=Ve("size-16 scale-75  shrink-0 rounded-full grid place-items-center",{variants:{type:{song:"bg-[#FFEE99]/10",hype:"bg-[#FF99F1]/10"}},defaultVariants:{type:"song"}});return(a,h)=>{var m;const r=D,l=Se;return c(),v("div",Ye,[t("div",{class:z(e(n)({type:a.type}))},[i(r,{name:a.type=="song"?"music":"mic",class:z(("cn"in a?a.cn:e(P))(a.request.status==="now-playing"?"animate-bounce":""))},null,8,["name","class"])],2),t("div",Ke,[a.request.type==="hype"&&a.detailed?(c(),x(l,{key:0,content:a.request.description,class:"font-medium"},null,8,["content"])):a.detailed?(c(),v("div",Je,[i(l,{content:((m=a.request)==null?void 0:m.song_title)??"",class:"font-medium text-foreground"},null,8,["content"]),i(l,{content:`by ${a.request.artist}`,class:"font-medium text-muted-foreground"},null,8,["content"])])):y("",!0),t("div",Xe,[t("div",Ze,[i(r,{name:"money"}),t("div",et," â‚¦"+d(("formatMoney"in a?a.formatMoney:e(Be))(a.request.price)),1)]),i(e(we)),t("div",tt,d(a.request.type=="hype"?"HYPE":"SONG"),1),i(e(we)),e(p)===a.request.audience.email?(c(),v("div",st," Your request ")):(c(),v("div",ot," From "+d(a.request.nickname??a.request.audience.name),1))])])])}}}),at={key:0,class:"w-full rounded-xl relative"},lt={class:"py-4 px-3 sm:px-6 bg-[#1C1B1F] rounded-t-[inherit]"},it={class:"flex items-center gap-4 text-muted-foreground text-sm -ml-1"},rt={class:"flex items-center gap-px"},dt={class:"flex items-center gap-px"},ut={class:"relative px-3 sm:px-6 py-8 bg-white/5 rounded-b-[inherit]"},ct={class:"space-y-1 grid justify-center text-center mb-8 relative z-[3]"},mt={key:1,class:"text-sm text-muted-foreground"},pt={key:0,class:"p-1 absolute -translate-y-4 left-0 right-0 text-center text-background font-medium text-sm bg-gradient-to-r from-[#844AFF] from-[1.28%] via-[#E991DD] via-[58.26%] to-[#FCF0AF] to-[100%]"},_t={key:1,class:"space-y-6"},ft={key:2,class:"p-3 text-center grid place-items-center"},vt=H({__name:"request-queue.card",props:{event:{}},setup(k){const p=k,{authEmail:n}=G(),a=w(()=>{var m,_;return((_=(m=p==null?void 0:p.event)==null?void 0:m.requests)!=null&&_.length?[...p.event.requests]:[]).sort(g=>{var S;return((S=g==null?void 0:g.audience)==null?void 0:S.email)===(n==null?void 0:n.value)?-1:0}).slice(0,3)}),h=w(()=>a.value.some(l=>l.audience.email===n.value)),r=w(()=>{var l,m;return(m=(l=p==null?void 0:p.event)==null?void 0:l.requests)==null?void 0:m.find(_=>(_==null?void 0:_.status)==="now-playing")});return(l,m)=>{var N,L,M,A,j,C,T,E,I,O,b,o,s;const _=D,g=De,S=nt;return l.event?(c(),v("div",at,[t("div",lt,[m[0]||(m[0]=t("div",{class:"font-display font-semibold text-2xl mb-2"},"Request Queue",-1)),t("div",it,[t("div",rt,[i(_,{name:"celebration",class:"relative scale-75"}),t("div",null,d((N=l.event)==null?void 0:N.title),1)]),t("div",dt,[i(_,{name:"location",class:"relative scale-75"}),t("div",null,d((L=l.event)==null?void 0:L.address),1)])])]),t("div",ut,[m[1]||(m[1]=t("div",{class:"bg-sp-purple/50 blur-[200px] size-56 absolute left-1/2 -translate-x-1/2"},null,-1)),t("div",ct,[i(g,{src:"/images/disco.png",class:z(("cn"in l?l.cn:e(P))("size-[120px] mx-auto",e(r)?"animate-spin":null))},null,8,["class"]),e(r)&&e(h)?(c(),x(Se,{key:0,class:"font-semibold text-base",content:((M=e(r))==null?void 0:M.type)==="hype"?(A=e(r))==null?void 0:A.description:((j=e(r))==null?void 0:j.song_title)??""},null,8,["content"])):y("",!0),e(r)?(c(),v("div",mt," Now "+d(((C=e(r))==null?void 0:C.type)==="song"?"playing":"performing hype")+"... ",1)):y("",!0)]),e(r)&&e(n)===((E=(T=e(r))==null?void 0:T.audience)==null?void 0:E.email)?(c(),v("div",pt,d(((I=e(r))==null?void 0:I.type)==="hype"?"Performing":"Playing")+" your "+d((O=e(r))==null?void 0:O.type)+" request ",1)):y("",!0),t("div",{class:z(("cn"in l?l.cn:e(P))("text-muted-foreground mb-4",e(r)&&e(n)===((o=(b=e(r))==null?void 0:b.audience)==null?void 0:o.email)?"mt-16":null))}," PREVIOUS REQUESTS ",2),(s=e(a))!=null&&s.length?(c(),v("div",_t,[(c(!0),v(ze,null,Ne(e(a),u=>(c(),x(S,{key:u.id,request:u,type:u.type,detailed:e(h)},null,8,["request","type","detailed"]))),128))])):(c(),v("div",ft," No requests yet, hang tight "))])])):y("",!0)}}}),gt={class:"p-[25px]"},yt={class:"grid place-items-center gap-4"},xt={class:"mx-auto"},ht={class:"grid grid-cols-2 items-center gap-2 [&_>_button]:w-full mt-8"},bt=H({__name:"rejected-request",props:{modelValue:{type:Boolean},modelModifiers:{}},emits:["update:modelValue"],setup(k){const p=Le(k,"modelValue");return(n,a)=>{const h=D,r=R,l=ke,m=He;return c(),x(m,{size:"md",controlled:"","hide-trigger":"","model-value":k.modelValue,"onUpdate:modelValue":a[1]||(a[1]=_=>p.value=_)},{default:f(({toggle:_})=>[t("div",gt,[t("div",yt,[t("div",xt,[i(h,{name:"sad"})]),a[2]||(a[2]=t("div",{class:"text-2xl font-display font-semibold text-center"}," Sorry, your request was rejected ",-1)),a[3]||(a[3]=t("div",{class:"text-muted-foreground text-center"}," We are sorry your request was rejected by the DJ. It may not have fit their flow, event, or capacity. We have sent a refund to your Spin Request wallet here ",-1))]),t("div",ht,[i(l,{to:"order-history",class:"block w-full"},{default:f(()=>[i(r,{variant:"secondary",class:"w-full"},{default:f(()=>a[4]||(a[4]=[U(" Go to My wallet ")])),_:1})]),_:1}),i(r,{onClick:a[0]||(a[0]=g=>p.value=!1)},{default:f(()=>a[5]||(a[5]=[U(" OKAY ")])),_:1})])])]),_:1},8,["model-value"])}}}),$t={class:"container pt-6 pb-20"},qt={key:0,class:"grid grid-cols-1 md:grid-cols-[1fr_400px] justify-between gap-6 mt-10"},wt={class:"grid lg:grid-cols-[auto_1fr] items-center gap-4"},kt={class:"py-2"},St={class:"font-display text-3xl md:text-4xl font-semibold"},Et={class:"flex flex-wrap gap-4 items-center my-4 mb-6"},Ft={class:"flex items-center gap-2"},Rt={class:"flex items-center gap-1"},Ut={class:"font-semibold"},It={class:"flex items-center gap-2"},Bt={class:"flex items-center gap-1"},Vt={class:"font-semibold"},zt={class:"flex items-center gap-2"},Nt={class:"flex items-center gap-1"},Lt={class:"font-semibold"},Mt={class:"flex items-center gap-2"},At={class:"flex items-center gap-1"},jt={class:"font-semibold"},Ct={class:"flex flex-col md:flex-row items-center gap-4"},Tt={class:"mt-10 space-y-2 text-muted-foreground hidden md:block"},Ot={class:"max-w-[550px]"},Pt={class:"inline-flex bg-white/10 items-center rounded-xl py-4 px-6 gap-4"},Dt={class:"text-lg font-semibold text-foreground"},Ht={key:1,class:"flex justify-center gap-x-2 mt-4 items-center animate-in slide-in-from-top-4"},Gt={class:"mt-4 space-y-4 text-muted-foreground md:hidden"},Wt={class:"max-w-[550px]"},Qt={class:"inline-flex bg-white/10 items-center rounded-xl py-4 px-6 gap-4"},Yt={class:"text-lg font-semibold text-foreground"},gs=H({__name:"index",setup(k){const p=Me(),{data:n,error:a,status:h,refresh:r}=We(`/user/host/${p.params.host}`),l=w(()=>{var o,s;return(s=(o=n==null?void 0:n.value)==null?void 0:o.data)==null?void 0:s.user}),{authEmail:m}=G(),_=w(()=>{var o,s,u;return((u=(s=(o=n.value)==null?void 0:o.data)==null?void 0:s.live_event)==null?void 0:u.requests)??[]}),g=w(()=>{var o;return(o=n.value)!=null&&o.data?n.value.data.total_followers.some(s=>s.user.email===m.value):!1}),{followUser:S,following:N,unFollowUser:L,unfollowing:M,subOrUnsubscribeUser:A,subscribing:j}=Qe(),C=()=>{var s,u;const o=(u=(s=n==null?void 0:n.value)==null?void 0:s.data)==null?void 0:u.user.id;o&&(g.value?L(o,r):S(o,r))},T=()=>{var s,u;const o=(u=(s=n==null?void 0:n.value)==null?void 0:s.data)==null?void 0:u.user.id;o&&A(o,"subscribe",r)},E=qe(!1),I=w(()=>{var o;return(o=_.value)==null?void 0:o.some(s=>s.audience.email===m.value)}),{$config:{public:{APP_BASE_URL:O}}}=Ae(),b=qe(!1);return je({title:()=>{var o;return`${((o=l==null?void 0:l.value)==null?void 0:o.stage_name)??"Live event"}`},ogTitle:()=>{var o,s,u,$;return`${((u=(s=(o=n.value)==null?void 0:o.data)==null?void 0:s.live_event)==null?void 0:u.title)??""} | ${(($=l.value)==null?void 0:$.stage_name)??""}`},ogDescription:()=>"Make your requests and take spotlight of this event",ogImage:()=>{var o;return`${((o=l.value)==null?void 0:o.profile_picture)??"https://cdn.pixabay.com/photo/2018/05/10/11/34/concert-3387324_1280.jpg"}`},ogImageAlt:()=>"Live Event",ogImageSecureUrl:()=>{var o;return`${((o=l.value)==null?void 0:o.profile_picture)??"https://cdn.pixabay.com/photo/2018/05/10/11/34/concert-3387324_1280.jpg"}`},twitterImage:()=>{var o;return`${((o=l.value)==null?void 0:o.profile_picture)??"https://cdn.pixabay.com/photo/2018/05/10/11/34/concert-3387324_1280.jpg"}`},twitterTitle:()=>{var o,s,u,$;return`${((u=(s=(o=n.value)==null?void 0:o.data)==null?void 0:s.live_event)==null?void 0:u.title)??""} | ${(($=l.value)==null?void 0:$.stage_name)??""}`},ogType:"article",ogUrl:()=>{var o;return`${O}/${((o=l.value)==null?void 0:o.slug)??""}`},ogSiteName:"SpinRequest"}),(o,s)=>{var W,Q,Y,K,J,X;const u=ke,$=Ue,Ee=Ie,F=D,Fe=R,Re=Oe;return c(),v("div",$t,[(W=e(n))!=null&&W.data.live_event&&!e(b)?(c(),x($,{key:0,class:"-translate-y-6",user:"audience","start-date":(K=(Y=(Q=e(n))==null?void 0:Q.data)==null?void 0:Y.live_event)==null?void 0:K.start_date,animate:""},{default:f(()=>{var q,B,V;return[i(u,{to:`/${e(p).params.host}/${(V=(B=(q=e(n))==null?void 0:q.data)==null?void 0:B.live_event)==null?void 0:V.id}/make-a-request`},{default:f(()=>[i(R,null,{default:f(()=>[U("Make "+d(e(I)?"another":"a")+" request",1)]),_:1})]),_:1},8,["to"])]}),_:1},8,["start-date"])):y("",!0),i(Ee,{to:"/audience",class:z(("cn"in o?o.cn:e(P))((X=(J=e(n))==null?void 0:J.data)!=null&&X.live_event?"mt-10":""))},null,8,["class"]),i(Re,{loading:e(h)==="pending",error:e(a)},{default:f(()=>{var q,B,V,Z,ee,te,se,oe,ne,ae,le,ie,re,de,ue,ce,me,pe,_e,fe,ve,ge,ye,xe,he,be,$e;return[e(l)?(c(),v("div",qt,[t("div",null,[t("div",wt,[i(Pe,{class:"!size-[120px] md:!size-[180px] xl:!size-[200px] !rounded-3xl !text-4xl",initials:("getInitials"in o?o.getInitials:e(Te))((q=e(l))==null?void 0:q.stage_name),image:e(l).profile_picture,onClick:s[0]||(s[0]=Kt=>b.value=!0)},null,8,["initials","image"]),t("div",kt,[t("div",St,d((B=e(l))==null?void 0:B.stage_name),1),t("div",Et,[t("div",Ft,[i(F,{name:"account_circle"}),t("div",Rt,[t("span",Ut,d((ee=(Z=(V=e(n))==null?void 0:V.data)==null?void 0:Z.total_followers)==null?void 0:ee.length),1),s[2]||(s[2]=t("span",{class:"text-muted-foreground"},"FOLLOWERS",-1))])]),t("div",It,[i(F,{name:"celebration"}),t("div",Bt,[t("span",Vt,d((se=(te=e(n))==null?void 0:te.data)==null?void 0:se.total_events),1),s[3]||(s[3]=t("span",{class:"text-muted-foreground"},"EVENTS",-1))])]),t("div",zt,[i(F,{name:"genres"}),t("div",Nt,[t("span",Lt,d((ne=(oe=e(n))==null?void 0:oe.data)==null?void 0:ne.total_requests),1),s[4]||(s[4]=t("span",{class:"text-muted-foreground"},"REQUESTS",-1))])]),t("div",Mt,[i(F,{name:"genres"}),t("div",At,[t("span",jt,d((le=(ae=e(n))==null?void 0:ae.data)==null?void 0:le.total_fulfilled_requests),1),s[5]||(s[5]=t("span",{class:"text-muted-foreground"},"FUFILLED",-1))])])]),t("div",Ct,[i(R,{variant:e(g)?"destructive":"secondary",class:"w-full md:w-auto",size:"lg",onClick:C,loading:e(N)||e(M),hide_loading_text:""},{default:f(()=>[U(d(e(g)?"Unfollow":"follow"),1)]),_:1},8,["variant","loading"]),(ie=e(n))!=null&&ie.data.live_event&&!e(b)?(c(),x(u,{key:0,to:`/${e(p).params.host}/${(ue=(de=(re=e(n))==null?void 0:re.data)==null?void 0:de.live_event)==null?void 0:ue.id}/make-a-request`,class:"w-full md:w-auto"},{default:f(()=>[i(R,{size:"lg",class:"w-full"},{default:f(()=>[U(" Make "+d(e(I)?"another":"a")+" request ",1)]),_:1})]),_:1},8,["to"])):(c(),x(R,{key:1,class:"w-full md:w-auto",size:"lg",onClick:T,loading:e(j)},{default:f(()=>s[6]||(s[6]=[U(" Notify me when Host Goes Live. ")])),_:1},8,["loading"]))])])]),t("div",Tt,[s[8]||(s[8]=t("div",null,"ABOUT ME",-1)),t("div",Ot,d(e(l).bio),1),t("div",Pt,[i(F,{name:"badge"}),t("div",null,[t("div",Dt,d((me=(ce=e(n))==null?void 0:ce.data)==null?void 0:me.total_fulfilled_requests)+" of "+d((_e=(pe=e(n))==null?void 0:pe.data)==null?void 0:_e.total_requests),1),s[7]||(s[7]=t("div",{class:"text-muted-foreground"},"Request fufilled",-1))])])])]),t("div",null,[(ve=(fe=e(n))==null?void 0:fe.data)!=null&&ve.live_event?(c(),x(vt,{key:0,event:(ye=(ge=e(n))==null?void 0:ge.data)==null?void 0:ye.live_event},null,8,["event"])):y("",!0),e(b)?(c(),v("div",Ht,[s[10]||(s[10]=t("div",null,"Unfufilled requests?",-1)),i(Ge,{message:"Was your song or hype requests completed?"},{default:f(()=>[i(Fe,{variant:"ghost",size:"sm"},{default:f(()=>s[9]||(s[9]=[t("div",{class:"text-red-500 underline hover:no-underline"}," REPORT ",-1)])),_:1})]),_:1})])):y("",!0)]),t("div",Gt,[s[12]||(s[12]=t("div",null,"ABOUT ME",-1)),t("div",Wt,d(e(l).bio),1),t("div",Qt,[i(F,{name:"badge"}),t("div",null,[t("div",Yt,d((he=(xe=e(n))==null?void 0:xe.data)==null?void 0:he.total_fulfilled_requests)+" of "+d(($e=(be=e(n))==null?void 0:be.data)==null?void 0:$e.total_requests),1),s[11]||(s[11]=t("div",{class:"text-muted-foreground"},"Request fufilled",-1))])])])])):y("",!0)]}),_:1},8,["loading","error"]),i(bt,{modelValue:e(E),"onUpdate:modelValue":s[1]||(s[1]=q=>Ce(E)?E.value=q:null)},null,8,["modelValue"])])}}});export{gs as default};
