import{c as W,g as ne}from"./Cpj98o6Y.js";import{r as Y,n as Z,x as ie}from"./WaQEaKbu.js";import{p as ue}from"./DUALgrMt.js";var J={exports:{}},ce=J.exports,ee;function se(){return ee||(ee=1,function(O,M){(function(r,g){g()})(ce,function(){function r(l,f){return typeof f>"u"?f={autoBom:!1}:typeof f!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),f={autoBom:!f}),f.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(l.type)?new Blob(["\uFEFF",l],{type:l.type}):l}function g(l,f,b){var d=new XMLHttpRequest;d.open("GET",l),d.responseType="blob",d.onload=function(){T(d.response,f,b)},d.onerror=function(){console.error("could not download file")},d.send()}function S(l){var f=new XMLHttpRequest;f.open("HEAD",l,!1);try{f.send()}catch{}return 200<=f.status&&299>=f.status}function k(l){try{l.dispatchEvent(new MouseEvent("click"))}catch{var f=document.createEvent("MouseEvents");f.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),l.dispatchEvent(f)}}var v=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof W=="object"&&W.global===W?W:void 0,y=v.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),T=v.saveAs||(typeof window!="object"||window!==v?function(){}:"download"in HTMLAnchorElement.prototype&&!y?function(l,f,b){var d=v.URL||v.webkitURL,P=document.createElement("a");f=f||l.name||"download",P.download=f,P.rel="noopener",typeof l=="string"?(P.href=l,P.origin===location.origin?k(P):S(P.href)?g(l,f,b):k(P,P.target="_blank")):(P.href=d.createObjectURL(l),setTimeout(function(){d.revokeObjectURL(P.href)},4e4),setTimeout(function(){k(P)},0))}:"msSaveOrOpenBlob"in navigator?function(l,f,b){if(f=f||l.name||"download",typeof l!="string")navigator.msSaveOrOpenBlob(r(l,b),f);else if(S(l))g(l,f,b);else{var d=document.createElement("a");d.href=l,d.target="_blank",setTimeout(function(){k(d)})}}:function(l,f,b,d){if(d=d||open("","_blank"),d&&(d.document.title=d.document.body.innerText="downloading..."),typeof l=="string")return g(l,f,b);var P=l.type==="application/octet-stream",N=/constructor/i.test(v.HTMLElement)||v.safari,$=/CriOS\/[\d]+/.test(navigator.userAgent);if(($||P&&N||y)&&typeof FileReader<"u"){var q=new FileReader;q.onloadend=function(){var _=q.result;_=$?_:_.replace(/^data:[^;]*;/,"data:attachment/file;"),d?d.location.href=_:location=_,d=null},q.readAsDataURL(l)}else{var G=v.URL||v.webkitURL,V=G.createObjectURL(l);d?d.location=V:location.href=V,d=null,setTimeout(function(){G.revokeObjectURL(V)},4e4)}});v.saveAs=T.saveAs=T,O.exports=T})}(J)),J.exports}var le=se();const ge=ne(le);var Q={exports:{}},te;function fe(){return te||(te=1,function(O){(function(M){var r=_(),g=re(),S=oe(),k=ae(),v={imagePlaceholder:void 0,cacheBust:!1},y={toSvg:T,toPng:f,toJpeg:b,toBlob:d,toPixelData:l,impl:{fontFaces:S,images:k,util:r,inliner:g,options:{}}};O.exports=y;function T(n,t){return t=t||{},P(t),Promise.resolve(n).then(function(i){return $(i,t.filter,!0)}).then(q).then(G).then(o).then(function(i){return V(i,t.width||r.width(n),t.height||r.height(n))});function o(i){return t.bgcolor&&(i.style.backgroundColor=t.bgcolor),t.width&&(i.style.width=t.width+"px"),t.height&&(i.style.height=t.height+"px"),t.style&&Object.keys(t.style).forEach(function(h){i.style[h]=t.style[h]}),i}}function l(n,t){return N(n,t||{}).then(function(o){return o.getContext("2d").getImageData(0,0,r.width(n),r.height(n)).data})}function f(n,t){return N(n,t||{}).then(function(o){return o.toDataURL()})}function b(n,t){return t=t||{},N(n,t).then(function(o){return o.toDataURL("image/jpeg",t.quality||1)})}function d(n,t){return N(n,t||{}).then(r.canvasToBlob)}function P(n){typeof n.imagePlaceholder>"u"?y.impl.options.imagePlaceholder=v.imagePlaceholder:y.impl.options.imagePlaceholder=n.imagePlaceholder,typeof n.cacheBust>"u"?y.impl.options.cacheBust=v.cacheBust:y.impl.options.cacheBust=n.cacheBust}function N(n,t){return T(n,t).then(r.makeImage).then(r.delay(100)).then(function(i){var h=o(n);return h.getContext("2d").drawImage(i,0,0),h});function o(i){var h=document.createElement("canvas");if(h.width=t.width||r.width(i),h.height=t.height||r.height(i),t.bgcolor){var s=h.getContext("2d");s.fillStyle=t.bgcolor,s.fillRect(0,0,h.width,h.height)}return h}}function $(n,t,o){if(!o&&t&&!t(n))return Promise.resolve();return Promise.resolve(n).then(i).then(function(a){return h(n,a,t)}).then(function(a){return s(n,a)});function i(a){return a instanceof HTMLCanvasElement?r.makeImage(a.toDataURL()):a.cloneNode(!1)}function h(a,u,A){var B=a.childNodes;if(B.length===0)return Promise.resolve(u);return w(u,r.asArray(B),A).then(function(){return u});function w(H,U,x){var R=Promise.resolve();return U.forEach(function(D){R=R.then(function(){return $(D,x)}).then(function(L){L&&H.appendChild(L)})}),R}}function s(a,u){if(!(u instanceof Element))return u;return Promise.resolve().then(A).then(B).then(w).then(H).then(function(){return u});function A(){U(window.getComputedStyle(a),u.style);function U(x,R){x.cssText?R.cssText=x.cssText:D(x,R);function D(L,I){r.asArray(L).forEach(function(e){I.setProperty(e,L.getPropertyValue(e),L.getPropertyPriority(e))})}}}function B(){[":before",":after"].forEach(function(x){U(x)});function U(x){var R=window.getComputedStyle(a,x),D=R.getPropertyValue("content");if(D===""||D==="none")return;var L=r.uid();u.className=u.className+" "+L;var I=document.createElement("style");I.appendChild(e(L,x,R)),u.appendChild(I);function e(c,p,m){var E="."+c+":"+p,C=m.cssText?z(m):K(m);return document.createTextNode(E+"{"+C+"}");function z(j){var F=j.getPropertyValue("content");return j.cssText+" content: "+F+";"}function K(j){return r.asArray(j).map(F).join("; ")+";";function F(X){return X+": "+j.getPropertyValue(X)+(j.getPropertyPriority(X)?" !important":"")}}}}}function w(){a instanceof HTMLTextAreaElement&&(u.innerHTML=a.value),a instanceof HTMLInputElement&&u.setAttribute("value",a.value)}function H(){u instanceof SVGElement&&(u.setAttribute("xmlns","http://www.w3.org/2000/svg"),u instanceof SVGRectElement&&["width","height"].forEach(function(U){var x=u.getAttribute(U);x&&u.style.setProperty(U,x)}))}}}function q(n){return S.resolveAll().then(function(t){var o=document.createElement("style");return n.appendChild(o),o.appendChild(document.createTextNode(t)),n})}function G(n){return k.inlineAll(n).then(function(){return n})}function V(n,t,o){return Promise.resolve(n).then(function(i){return i.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(i)}).then(r.escapeXhtml).then(function(i){return'<foreignObject x="0" y="0" width="100%" height="100%">'+i+"</foreignObject>"}).then(function(i){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+t+'" height="'+o+'">'+i+"</svg>"}).then(function(i){return"data:image/svg+xml;charset=utf-8,"+i})}function _(){return{escape:H,parseExtension:t,mimeType:o,dataAsUrl:w,isDataUrl:i,canvasToBlob:s,resolveUrl:a,getAndEncode:B,uid:u(),delay:U,asArray:x,escapeXhtml:R,makeImage:A,width:D,height:L};function n(){var e="application/font-woff",c="image/jpeg";return{woff:e,woff2:e,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:c,jpeg:c,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}function t(e){var c=/\.([^\.\/]*?)$/g.exec(e);return c?c[1]:""}function o(e){var c=t(e).toLowerCase();return n()[c]||""}function i(e){return e.search(/^(data:)/)!==-1}function h(e){return new Promise(function(c){for(var p=window.atob(e.toDataURL().split(",")[1]),m=p.length,E=new Uint8Array(m),C=0;C<m;C++)E[C]=p.charCodeAt(C);c(new Blob([E],{type:"image/png"}))})}function s(e){return e.toBlob?new Promise(function(c){e.toBlob(c)}):h(e)}function a(e,c){var p=document.implementation.createHTMLDocument(),m=p.createElement("base");p.head.appendChild(m);var E=p.createElement("a");return p.body.appendChild(E),m.href=c,E.href=e,E.href}function u(){var e=0;return function(){return"u"+c()+e++;function c(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}}}function A(e){return new Promise(function(c,p){var m=new Image;m.onload=function(){c(m)},m.onerror=p,m.src=e})}function B(e){var c=3e4;return y.impl.options.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime()),new Promise(function(p){var m=new XMLHttpRequest;m.onreadystatechange=z,m.ontimeout=K,m.responseType="blob",m.timeout=c,m.open("GET",e,!0),m.send();var E;if(y.impl.options.imagePlaceholder){var C=y.impl.options.imagePlaceholder.split(/,/);C&&C[1]&&(E=C[1])}function z(){if(m.readyState===4){if(m.status!==200){E?p(E):j("cannot fetch resource: "+e+", status: "+m.status);return}var F=new FileReader;F.onloadend=function(){var X=F.result.split(/,/)[1];p(X)},F.readAsDataURL(m.response)}}function K(){E?p(E):j("timeout of "+c+"ms occured while fetching resource: "+e)}function j(F){console.error(F),p("")}})}function w(e,c){return"data:"+c+";base64,"+e}function H(e){return e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")}function U(e){return function(c){return new Promise(function(p){setTimeout(function(){p(c)},e)})}}function x(e){for(var c=[],p=e.length,m=0;m<p;m++)c.push(e[m]);return c}function R(e){return e.replace(/#/g,"%23").replace(/\n/g,"%0A")}function D(e){var c=I(e,"border-left-width"),p=I(e,"border-right-width");return e.scrollWidth+c+p}function L(e){var c=I(e,"border-top-width"),p=I(e,"border-bottom-width");return e.scrollHeight+c+p}function I(e,c){var p=window.getComputedStyle(e).getPropertyValue(c);return parseFloat(p.replace("px",""))}}function re(){var n=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:h,shouldProcess:t,impl:{readUrls:o,inline:i}};function t(s){return s.search(n)!==-1}function o(s){for(var a=[],u;(u=n.exec(s))!==null;)a.push(u[1]);return a.filter(function(A){return!r.isDataUrl(A)})}function i(s,a,u,A){return Promise.resolve(a).then(function(w){return u?r.resolveUrl(w,u):w}).then(A||r.getAndEncode).then(function(w){return r.dataAsUrl(w,r.mimeType(a))}).then(function(w){return s.replace(B(a),"$1"+w+"$3")});function B(w){return new RegExp(`(url\\(['"]?)(`+r.escape(w)+`)(['"]?\\))`,"g")}}function h(s,a,u){if(A())return Promise.resolve(s);return Promise.resolve(s).then(o).then(function(B){var w=Promise.resolve(s);return B.forEach(function(H){w=w.then(function(U){return i(U,H,a,u)})}),w});function A(){return!t(s)}}}function oe(){return{resolveAll:n,impl:{readAll:t}};function n(){return t().then(function(o){return Promise.all(o.map(function(i){return i.resolve()}))}).then(function(o){return o.join(`
`)})}function t(){return Promise.resolve(r.asArray(document.styleSheets)).then(i).then(o).then(function(s){return s.map(h)});function o(s){return s.filter(function(a){return a.type===CSSRule.FONT_FACE_RULE}).filter(function(a){return g.shouldProcess(a.style.getPropertyValue("src"))})}function i(s){var a=[];return s.forEach(function(u){try{r.asArray(u.cssRules||[]).forEach(a.push.bind(a))}catch(A){console.log("Error while reading CSS rules from "+u.href,A.toString())}}),a}function h(s){return{resolve:function(){var u=(s.parentStyleSheet||{}).href;return g.inlineAll(s.cssText,u)},src:function(){return s.style.getPropertyValue("src")}}}}}function ae(){return{inlineAll:t,impl:{newImage:n}};function n(o){return{inline:i};function i(h){return r.isDataUrl(o.src)?Promise.resolve():Promise.resolve(o.src).then(h||r.getAndEncode).then(function(s){return r.dataAsUrl(s,r.mimeType(o.src))}).then(function(s){return new Promise(function(a,u){o.onload=a,o.onerror=u,o.src=s})})}}function t(o){if(!(o instanceof Element))return Promise.resolve(o);return i(o).then(function(){return o instanceof HTMLImageElement?n(o).inline():Promise.all(r.asArray(o.childNodes).map(function(h){return t(h)}))});function i(h){var s=h.style.getPropertyValue("background");return s?g.inlineAll(s).then(function(a){h.style.setProperty("background",a,h.style.getPropertyPriority("background"))}).then(function(){return h}):Promise.resolve(h)}}}})()}(Q)),Q.exports}var he=fe();const me=ne(he),we=(O,M,r=[])=>{const g=Y(!1),S=Y();return{blob:S,converting:g,convertNodeToImage:async()=>{try{g.value=!0;const v=document.querySelector(O),y=v?await me.toBlob(v,{filter(T){return!(r!=null&&r.includes(T==null?void 0:T.id))}}):null;g.value=!1,y&&(S.value=y,M==null||M(y))}catch(v){g.value=!1,console.error("FAILED TO CONVERT NODE",v)}}}},ye=(O,M)=>{const r=decodeURIComponent(Z(O)),g=Z(M),S=Y(!1),k=()=>{const b=`https://www.facebook.com/sharer/sharer.php?u=${r}`;window.open(b,"_blank","width=600,height=400")},v=`https://x.com/intent/post?url=${r}&feature=shared&text=${g??""}&via=spinrequest`,y=`https://api.whatsapp.com/send?text=${g}%20${r}&feature=shared&type=custom_url&app_absent=0`,T=`mailto:?subject=${g}&body=${r}`;return{shareToFacebook:k,copyLink:async()=>{await navigator.clipboard.writeText(r),S.value=!0,await ue(1200),S.value=!1},externalNavigate:b=>ie(b,{external:!0,open:{target:"_blank"}}),twitterShareLink:v,whatsappShareLink:y,emailShareLink:T,copied:S}};export{ye as a,ge as s,we as u};
