import{_ as F}from"./BLM6mTaH.js";import{h as b,f as $,i as R,k as V,r as A,o as c,p,w as i,a as s,b as n,n as r,L as B,v as C,t as G,_ as I,s as w,x as P,m as T,y as O,d as m}from"./ZNDynpV9.js";import{_ as h,F as U}from"./C-Nfi8fI.js";const j=["onSubmit"],z=b({__name:"login-form",setup(N){const{$repo:_}=$(),{saveAuthUser:e}=R(),l=V(),a=A(!1),L=async({email:o,password:f})=>{var u,x,g,v;const d={email:o,password:f};try{a.value=!0;const t=await _.auth.loginUser(d),k=t==null?void 0:t.message;w({title:"Success",description:k,variant:"normal"}),e(t.data.token,t.data.user),a.value=!1;const y=(u=l.redirectedFrom)==null?void 0:u.fullPath,E=y||(((x=t==null?void 0:t.data)==null?void 0:x.role)==="host"?"/dashboard":"/audience");return P(E)}catch(t){a.value=!1,w({title:"Failed",description:((g=t==null?void 0:t.data)==null?void 0:g.message)??"Invalid credentials",variant:"warning"}),console.error("ERROR LOGGING IN",(v=t==null?void 0:t.data)==null?void 0:v.message)}},S={email:o=>o?!0:"Enter your email",password:o=>o?!0:"Enter your password"};return(o,f)=>(c(),p(r(U),{"validation-schema":S,as:"div"},{default:i(({handleSubmit:d})=>[s("form",{onSubmit:u=>d(u,L),class:"space-y-7"},[n(h,{name:"email",placeholder:"Enter your email here",label:"Email"}),n(h,{name:"password",placeholder:"Enter your password here",type:"password",label:"Password"}),n(I,{class:"w-full",type:"submit",size:"lg",disabled:r(a)},{default:i(()=>[r(a)?(c(),p(r(B),{key:0,class:"animate-spin mr-2"})):C("",!0),s("span",null,G(r(a)?"Please wait...":"Submit"),1)]),_:1},8,["disabled"])],40,j)]),_:1}))}}),D={class:"max-w-[90%] mx-auto w-[400px]"},M={class:"flex justify-center gap-x-4 mt-2"},W={class:"flex gap-x-2"},K=b({__name:"login",setup(N){return T({title:"Login"}),(_,e)=>{const l=F,a=O;return c(),p(a,{name:"auth"},{default:i(()=>[s("div",null,[e[3]||(e[3]=s("div",{class:"text-primary text-center mb-2 text-xl"},"Login",-1)),e[4]||(e[4]=s("div",{class:"text-4xl lg:text-5xl font-semibold my-4 text-center max-w-[595px] mx-auto font-display"}," Welcome, Log in to your account ",-1)),s("div",D,[n(z),s("div",M,[n(l,{to:"/forgot-password",class:"underline hover:no-underline ml-1"},{default:i(()=>e[0]||(e[0]=[m("Forgot password")])),_:1}),s("div",W,[e[2]||(e[2]=m(" Not a user? ")),n(l,{to:"/signup",class:"underline hover:no-underline"},{default:i(()=>e[1]||(e[1]=[m(" Sign up ")])),_:1})])])])])]),_:1})}}});export{K as default};
